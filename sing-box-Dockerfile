FROM alpine:latest as source
ARG TARGETARCH
COPY bin/sing-box-linux-${TARGETARCH} /sing-box
RUN chmod +x /sing-box
FROM alpine:latest
COPY --from=source /sing-box /usr/local/bin/sing-box

RUN set -ex \
    && apk upgrade \
    && apk add bash tzdata ca-certificates \
    && rm -rf /var/cache/apk/*

ENTRYPOINT [ "sing-box" ]
